<?php
    /**
     * @var \Magento\Framework\View\Element\Template $block
     */

    $product = $block->getCurrentProduct();
    $productId = $product ? $product->getId() : null;
    ?>

    <div class="faq-section-container my-8">
        <h3 class="text-xl font-semibold mb-4 border-b pb-2">
            Frequently Asked Questions
        </h3>
    </div>

        <div class="flex justify-between items-start gap-8 my-10" x-data="{ open:false }" x-effect="if(open) $nextTick(()=> $refs.name && $refs.name.focus())">

        <div class="w-1/4 border rounded-lg p-10 shadow" style="background-color: #EFF6FF;">
            <h3 class="text-xl font-semibold text-center mb-6">FAQ</h3>
            <p class="text-center text-gray-700 mb-5"
                style="margin: revert;">
                If you have questions, please ask.  
                We are always happy to help you.
            </p>

            <button 
                @click="open = true"
                style="background-color: orange;"
                class="bg-lime-600 text-black w-full py-2 rounded hover:bg-lime-700"
            >
                CLICK TO ASK A QUESTION
            </button>
        </div>

    <div 
        x-show="open"
        x-transition
        @click.self="open = false"
        x-cloak
        class="fixed inset-0 flex items-center justify-center z-50"
    >

    <div
            class="absolute inset-0 z-40"
            style="background-color: rgba(0,0,0,0.28); backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px);"
            @click="open = false"
            aria-hidden="true"
        ></div>

        <div class="bg-white p-10 rounded-lg shadow-2xl max-w-2xl relative mx-auto z-50"
             @click.stop
             x-trap="open"
             role="dialog"
             aria-modal="true"
             aria-labelledby="faq-modal-title"
        >

            <button 
                @click="open = false" 
                class="absolute top-3 right-4 text-3xl"
            >
                &times;
            </button>

            <h3 id="faq-modal-title" class="text-2xl font-semibold mb-6 text-center">
                Ask Question
            </h3>

            <form class="space-y-5" method="post" action="<?= $block->getUrl('faq/index/save'); ?>">
            
                <?= $block->getBlockHtml('formkey'); ?>

                <input type="hidden" name="product_id" value="<?= $productId  ?>" />
                

                <div>
                    <label class="block text-sm font-medium">Name *</label>
                    <input name="customer_name" type="text" required class="border w-full p-3 rounded" x-ref="name" />
                </div>

                <div>
                    <label class="block text-sm font-medium">Email *</label>
                    <input name="customer_email" type="email" required class="border w-full p-3 rounded" />
                </div>

                <div>
                    <label class="block text-sm font-medium">Question *</label>
                    <textarea name="question" required class="border w-full p-3 rounded h-40"></textarea>
                </div>

                <button 
                    type="submit"
                    style="background-color: orange;"
                    class="bg-lime-600 text-black px-4 py-3 rounded hover:bg-lime-700 text-lg"
                >
                    SUBMIT
                </button>

            </form>
        </div>
    </div>